{"version":3,"sources":["main.js"],"names":["Main","form","document","querySelector","addEventListener","handleSearch","handleMapCenterResponse","getMapCenter","evt","responseInfo","detail","console","log","mapCenter","center","query","value","searchInfo","lat","lng","searchEvent","CustomEvent","dispatchEvent","preventDefault","setupListener","getCenterEvent"],"mappings":";;;;;;;;;;IAAMA,I;AAEF,kBAAe;AAAA;;AAAA;;AAAA,2CAUC,YAAM;AAClB,UAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,8BAAvB,CAAb;AACAF,MAAAA,IAAI,CAACG,gBAAL,CAAsB,QAAtB,EAAgC,KAAI,CAACC,YAArC;AAGAH,MAAAA,QAAQ,CAACE,gBAAT,4BAAqD,KAAI,CAACE,uBAA1D;AACAJ,MAAAA,QAAQ,CAACE,gBAAT,cAAuC,KAAI,CAACG,YAA5C,EANkB,CAOlB;AACA;AACH,KAnBc;;AAAA,qDAqBW,UAACC,GAAD,EAAS;AAC/B,UAAMC,YAAY,GAAGD,GAAG,CAACE,MAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,eAAmBJ,GAAG,CAACE,MAAvB;AACA,UAAMG,SAAS,GAAGJ,YAAY,CAACK,MAA/B;AACAH,MAAAA,OAAO,CAACC,GAAR,4BAAuCC,SAAvC;AAEA,UAAME,KAAK,GAAGb,QAAQ,CAACC,aAAT,yBAA6Ca,KAA3D;AACAL,MAAAA,OAAO,CAACC,GAAR,UAAqBG,KAArB,EAA6BF,SAA7B;AACA,UAAMI,UAAU,GAAG;AACfF,QAAAA,KAAK,EAAEA,KADQ;AAEfG,QAAAA,GAAG,EAAEL,SAAS,CAACK,GAFA;AAGfC,QAAAA,GAAG,EAAEN,SAAS,CAACM;AAHA,OAAnB;AAKAR,MAAAA,OAAO,CAACC,GAAR,iBAA4BK,UAA5B;AACA,UAAMG,WAAW,GAAG,IAAIC,WAAJ,oBAAmC;AAAEX,QAAAA,MAAM,EAAEO;AAAV,OAAnC,CAApB;AACAf,MAAAA,QAAQ,CAACoB,aAAT,CAAuBF,WAAvB;AAEH,KAtCc;;AAAA,0CAwCA,UAACZ,GAAD,EAAS;AACpBA,MAAAA,GAAG,CAACe,cAAJ;;AACA,MAAA,KAAI,CAAChB,YAAL;AAGH,KA7Cc;;AAEX,SAAKiB,aAAL;AACH;;;;WAED,wBAAe;AACX,UAAMC,cAAc,GAAG,IAAIJ,WAAJ,kBAAvB;AACAnB,MAAAA,QAAQ,CAACoB,aAAT,CAAuBG,cAAvB;AACH;;;;;;AAwCL,IAAIzB,IAAJ","sourcesContent":["class Main {\r\n\r\n    constructor () {\r\n\r\n        this.setupListener()\r\n    }\r\n\r\n    getMapCenter (){\r\n        const getCenterEvent = new CustomEvent(`get-map-center`)\r\n        document.dispatchEvent(getCenterEvent)\r\n    }\r\n\r\n    setupListener = () => {\r\n        const form = document.querySelector('form[name=\"business_search\"]')\r\n        form.addEventListener('submit', this.handleSearch)\r\n        \r\n\r\n        document.addEventListener(`get-map-center-response`, this.handleMapCenterResponse)\r\n        document.addEventListener(`map-ready`, this.getMapCenter)\r\n        // const refineForm = document.querySelector('form[name=\"refine_search\"]')\r\n        // refineForm.addEventListener('submit', this.refineSearch)\r\n    }\r\n\r\n    handleMapCenterResponse = (evt) => {\r\n        const responseInfo = evt.detail\r\n        console.log(`evt ${evt.detail}`)\r\n        const mapCenter = responseInfo.center\r\n        console.log(`handleMapCenterResponse`, mapCenter)\r\n\r\n        const query = document.querySelector(`input[name=\"term\"]`).value\r\n        console.log(`query`, query , mapCenter)\r\n        const searchInfo = {\r\n            query: query,\r\n            lat: mapCenter.lat,\r\n            lng: mapCenter.lng\r\n        }\r\n        console.log(`handleSearch`, searchInfo)\r\n        const searchEvent = new CustomEvent(`business-search`, { detail: searchInfo })\r\n        document.dispatchEvent(searchEvent)\r\n        \r\n    }\r\n\r\n    handleSearch = (evt) => {\r\n        evt.preventDefault()\r\n        this.getMapCenter()\r\n\r\n        \r\n    }\r\n}\r\n\r\nnew Main()"],"file":"main.js"}